<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Master</title>

    <!-- JQuery CDN -->
       <!-- JQuery CDN -->
       <script
       type="text/javascript"
       src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"
     ></script>
 
     <!-- Moment CDN (for date) -->
     <script
       type="text/javascript"
       src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"
     ></script>
 
     <!-- Daterangepicker CDN -->
     <script
       type="text/javascript"
       src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"
     ></script>

    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootsthap/5.3.1/css/bootsthap.min.css" integrity="sha512-Z/def5z5u2aR89OuzYcxmDJ0Bnd5V1cKqBEbvLOiUNWdg9PQeXVvXLI90SE4QOHGlfLqUnDNVAYyZi8UwUTmWQ==" crossorigin="anonymous" referrerpolicy="no-referrer" /> -->

    <link rel="stylesheet" href="./css/bootsrap.css" />
    <link rel="stylesheet" href="./css/bootstrapSelect.css" />
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/daterange.css" />
    <link rel = "icon" href ="./images/logo.svg" type = "image/x-icon">


   <!-- Bootstrap CDN -->
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>

   <!-- Bootstrap Select CDN -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
  
  </head>
  <body>
 
   

    <!-- Main Section Starts -->
    <main>
      <!-- Left Section Starts -->
      <aside style="display: none">
        <!-- Filter Container Starts -->
        <div id="filter-container" style="display: block">
          
         
          <!-- Filter Item configuration (options) -->
          <div class="items">
            <div class="filter-catergory">
              <input
              type="text"
              name="Search_name"
              value=""
              placeholder="Name / Number"
              id="name_search"
            / style="border: 1px solid #F2F4F5;
            border-radius: 6px;
            width: 100%;
            height: 36px; padding-left: 1rem">
            </div>
          </div>
          <!-- Filter Item homeLocation (search)-->
          <div class="items">
            <div class="filter-catergory" onclick="handleToggle(this)">
             Select Configuration
              <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
            </div>

            <div
              class="filter-items"
              data-ns="homeLocation"
              data-type="search"
              style="display: none"
            >
              <select
                class="search_source selectpicker"
                id="search_configuration"
                multiple
                data-live-search="thue"
                data-actions-box="thue"
                style="width: 100%"
                title="Search  Configuration.."
              >
                
              </select>
            </div>
          </div>
          <!-- Filter Item locationIntent (search)-->
          <div class="items">
            <div class="filter-catergory" onclick="handleToggle(this)">
              Select Source 
              <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
            </div>
            <div
              class="filter-items"
              data-ns="locationIntent"
              data-type="search"
              style="display: none"
            >
              <select
                class="search_source selectpicker"
                id="search_source"
                multiple
                data-live-search="thue"
                data-actions-box="thue"
                style="width: 100%"
                title="Search Source.."
              >
                
              </select>
            </div>
          </div>
          <!-- Filter Item locality (search)-->
          <div class="items">
            <div class="filter-catergory" onclick="handleToggle(this)">
              Select Project
              <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
            </div>
            <div
              class="filter-items"
              data-ns="locality"
              data-type="search"
              style="display: none"
            >
              <select
                class="search_source selectpicker"
                id="search_project_main"
                multiple
                data-live-search="thue"
                data-actions-box="thue"
                style="width: 100%"
                title="Search Project.."
              >
                
              </select>
            </div>
          </div>
          <!-- ------------------------ search Invoice Status ------------------------ -->
          <div class="items">
            <div class="filter-catergory" onclick="handleToggle(this)">
              Select Invoice Status 
              <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
            </div>
            <div
              class="filter-items"
              data-ns="locationIntent"
              data-type="search"
              style="display: none"
            >
              <select
                class="search_source selectpicker"
                id="search_invoice_status"
                multiple
                data-live-search="thue"
                data-actions-box="thue"
                style="width: 100%"
                title="Search Invoice Status.."
              >
                
              </select>
            </div>
          </div>
        <!-- -------------------------- search Team Lead --------------------------- -->
        <div class="items">
          <div class="filter-catergory" onclick="handleToggle(this)">
            Select Team Lead 
            <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
          </div>
          <div
            class="filter-items"
            data-ns="locationIntent"
            data-type="search"
            style="display: none"
          >
            <select
              class="search_source selectpicker"
              id="search_team_lead"
              data-live-search="thue"
              multiple
              data-actions-box="thue"
              style="width: 100%"
              title="Search Team LEad.."
            >
              
            </select>
          </div>
        </div>

        <!-- ----------------------- search invoice process ------------------------ -->

        <div class="items">
          <div class="filter-catergory" onclick="handleToggle(this)">
            Select Invoice Process 
            <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
          </div>
          <div
            class="filter-items"
            data-ns="locationIntent"
            data-type="search"
            style="display: none"
          >
            <select
              class="search_source selectpicker"
              id="search_invoice_process"
              data-live-search="thue"
              multiple
              data-actions-box="thue"
              style="width: 100%"
              title="Search Invoice Process.."
            >
              
            </select>
          </div>
        </div>

        <!-- --------------------------- search gst paid --------------------------- -->

        <div class="items">
          <div class="filter-catergory" onclick="handleToggle(this)">
            Select Gst Paid 
            <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
          </div>
          <div
            class="filter-items"
            data-ns="locationIntent"
            data-type="search"
            style="display: none"
          >
            <select
              class="search_source selectpicker"
              id="search_gst_paid"
              multiple
              data-live-search="thue"
              data-actions-box="thue"
              style="width: 100%"
              title="Search Gst Paid Status.."
            >
              
            </select>
            <option value="1">Yes</option>
            <option value="0">No</option>
          </div>
        </div>

        <!-- -------------------------- Search Sourced By -------------------------- -->

        <div class="items">
          <div class="filter-catergory" onclick="handleToggle(this)">
            Select Sourced By
            <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
          </div>
          <div
            class="filter-items"
            data-ns="locationIntent"
            data-type="search"
            style="display: none"
          >
            <select
              class="search_source selectpicker"
              id="search_sourced_by"
              data-live-search="thue"
              data-actions-box="thue"
              multiple
              style="width: 100%"
              title="Search Source.."
            >
              
            </select>
          </div>
        </div>

        <!-- -------------------------- Search Closed By --------------------------- -->

        <div class="items">
          <div class="filter-catergory" onclick="handleToggle(this)">
            Select Closed By 
            <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
          </div>
          <div
            class="filter-items"
            data-ns="locationIntent"
            data-type="search"
            style="display: none"
          >
            <select
              class="search_source selectpicker"
              id="search_closed_by"
              multiple
              data-live-search="thue"
              data-actions-box="thue"
              style="width: 100%"
              title="Search Closed By.."
            >
              
            </select>
          </div>
        </div>
          <!-- Filter Item addedOn (daterange) -->
          <div class="items">
            <div class="filter-catergory" onclick="handleToggle(this)">
              Closure Date
              <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
            </div>

            <div
              class="filter-items"
              data-ns="addedOn"
              data-type="daterange"
              style="display: none"
            >
              <input
                type="text"
                name="closureDate"
                value=""
                placeholder="Select Date"
                id="search_closure_date"
              />
            </div>
          </div>

          <!-- ------------------------ Follow Up date search ------------------------ -->

          <div class="items">
            <div class="filter-catergory" onclick="handleToggle(this)">
              FollowUp Date
              <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
            </div>

            <div
              class="filter-items"
              data-ns="addedOn"
              data-type="daterange"
              style="display: none"
            >
              <input
                type="text"
                name="closureDate"
                value=""
                placeholder="Select Date"
                id="search_followup_date"
              />
            </div>
          </div>        
          
          <!-- ------------------------- Search Invoice Date ------------------------- -->

          <div class="items">
            <div class="filter-catergory" onclick="handleToggle(this)">
              Invoice Date
              <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
            </div>

            <div
              class="filter-items"
              data-ns="addedOn"
              data-type="daterange"
              style="display: none"
            >
              <input
                type="text"
                name="closureDate"
                value=""
                placeholder="Select Date"
                id="search_invoice_date"
              />
            </div>
          </div> 
          
          

          <!-- --------------------------- Tentative Date ---------------------------- -->

          <div class="items">
            <div class="filter-catergory" onclick="handleToggle(this)">
              Teantative Date
              <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
            </div>

            <div
              class="filter-items"
              data-ns="addedOn"
              data-type="daterange"
              style="display: none"
            >
              <input
                type="text"
                name="closureDate"
                value=""
                placeholder="Select Date"
                id="search_tentative_date"
              />
            </div>
          </div>        
          

          <!-- -------------------------- BA 2 Date search --------------------------- -->
          <div class="items">
            <div class="filter-catergory" onclick="handleToggle(this)">
              Search BA 2 date
              <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
            </div>

            <div
              class="filter-items"
              data-ns="addedOn"
              data-type="daterange"
              style="display: none"
            >
              <input
                type="text"
                name="closureDate"
                value=""
                placeholder="Select Date"
                id="search_ba_2"
              />
            </div>
          </div> 
          <!-- -------------------------- BA 3 Date search --------------------------- -->


          <div class="items">
            <div class="filter-catergory" onclick="handleToggle(this)">
              Search BA 3 date
              <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
            </div>

            <div
              class="filter-items"
              data-ns="addedOn"
              data-type="daterange"
              style="display: none"
            >
              <input
                type="text"
                name="closureDate"
                value=""
                placeholder="Select Date"
                id="search_ba_3"
              />
            </div>
          </div> 

          <!-- --------------------------- SDR DATE search --------------------------- -->

          <div class="items">
            <div class="filter-catergory" onclick="handleToggle(this)">
              Search SDR date
              <img src="./images/DownArrow.svg" alt="DownArrow" class="" />
            </div>

            <div
              class="filter-items"
              data-ns="addedOn"
              data-type="daterange"
              style="display: none"
            >
              <input
                type="text"
                name="closureDate"
                value=""
                placeholder="Select Date"
                id="search_sdr_date"
              />
            </div>
          </div> 

        <!-- Floating Button Starts -->
        <div class="btn-container" style="display: flex">
          <button class="search-btn btn1" onclick="handleSearch()">
            <img src="./images/Search.svg" alt="search" /> Search
          </button>
          <button class="clearAll-btn btn1" onclick="handleClearAll()" style="width: 116px;">
            <img src="./images/ClearAll.svg" alt="clear-all" /> Clear All
          </button>
        </div>
        <!-- Floating Button Ends-->
      </aside>
      <!-- Left Section Ends -->

      <!-- Right Section Starts -->
      <section>
        <button onclick="openFilter()" class="filter-btn">
          <img src="./images/Filter.svg" alt="filter" />
          FITLER
        </button>

        <div
          class="quick-filter-container"
          style="display: flex; justify-content: flex-end; gap: 2rem; "
        >
            <button
            class="quickFilter-btn btn1"
            onclick="openDialog('remarks-dialog')">
            <img src="./images/Add.svg" alt="filter" />
            Add New Client
            </button>
        </div>

        <!-- ------------------------------ Table Div ------------------------------ -->
        <div
        class="table-container"
        style="overflow-y: scroll; max-height: 87vh"
      >
        <!-- Table Starts -->
        <table border="1" id="dataRows">
          <thead style="background-color: #fafafc">
            <tr>
              <th style="width: 11.2rem">NAME</th>
              <th style="width: 11.2rem">AGREEMENT VALUE</th>
              <th style="width: 11.6rem; position: relative">PROJECT</th>
              <th style="width: 11.6rem">UNIT</th>
              <th style="width: 11rem">OB-STATUS</th>
              <th style="width: 11rem">BROKERAGE <br> PERCENT</th>
              <th style="width: 11rem">CLOSURE <br> DATE</th>
              <th style="width: 11rem">INVOICE <br> STATUS</th>
              <th style="width: 4rem">ACTION</th>
            </tr>
          </thead>
          <tbody id="table_body">
          </tbody>
        </table>
        
        <!-- Table Ends -->
      </div>
      </section>
      <!-- Right Section Starts -->
    </main>
    <!-- Main Section Starts -->


    <!-- ------------------------ UPDATE CLIENT INFORMATION ------------------------- -->
    <dialog id="update-client" style="display: none; height: 70%;">
      <div class="add-nlead-modal" style="height: 100%;">
        <!-- Heading  -->
        <div class="heading">
          <span>Update Client</span>
          <img
            class="close-btn"
            style="cursor: pointer"
            src="./images/Close.svg"
            alt="close"
            onclick="closeDialog('update-client')"
          />
        </div>

        <!-- Details Accordion -->
        
        <!-- Details Items Container -->
        <div class="details-container" style="display: block">
          <!-- Details Items  -->
          <div class="details-item">
            <div>
              <span class="float-span">Select Developer</span>
              <select
                class="search_source selectpicker"
                id="search_developer_ladder"
                data-att="search"
                data-value="homeLocation"
                data-live-search="thue"
                data-actions-box="thue"
                title="Search Here..."
              >
              </select>
            </div>
            <div>
              <span class="float-span">Select Project</span>
              <select
                class="search_source selectpicker"
                id="search_project_ladder"
                multiple
                data-att="search"
                data-value="locationIntent"
                data-live-search="thue"
                data-actions-box="thue"
                title="Search Here..."
              >
              </select>
            </div>
            <div>
              <span class="float-span">Ladder Type</span>
              <select
                class="search_source selectpicker"
                id="ladder_type"
                data-att="search"
                data-value="locationIntent"
                title="Search Here..."
              >
              <option value="Inthospective">Inthospective</option>
              <option value="Rethospective">Rethospective</option>
              </select>
            </div>
          </div>

          <div class="details-item">
            <div style="height: 38px">
              <span class="float-span">Select Ladder Start Date</span>
              <input
                placeholder="Enter Here"
                name="ladderStartDate"
                id="ladderStartDate"
                type="date"
                data-att="input"
                data-value="name"
              />
            </div>
            <div style="height: 38px">
              <span class="float-span">Select Ladder End Date</span>
              <input
                placeholder="Enter Here"
                name="ladderEndDate"
                id="ladderEndDate"
                type="date"
                data-att="input"
                data-value="name"
               />
            </div>
          </div>

          <!-- ---------------------- Adding the Ladder Stages ----------------------- -->
          <div class="dealRows" id="dealRow">
           <div class="details-item" id="ladderDeals" style="flex-direction: row;">
            <div style="height: 38px">
              <span class="float-span">Min Unit</span>
              <input
                placeholder="Enter Min Unit"
                id="stage1_min_unit"
                type="text"
                data-att="input"
                data-value="name"
               />
            </div>
            <div style="height: 38px">
              <span class="float-span">Max Unit</span>
              <input
                placeholder="Enter Max Unit"
                id="stage1_max_unit"
                type="text"
                data-att="input"
                data-value="name"
               />
            </div>
            <div style="height: 38px">
              <span class="float-span">Percent</span>
              <input
                placeholder="Percent"
                id="stage1_percent"
                type="text"
                data-att="input"
                data-value="name"
               />
            </div>
            <div style="height: 38px;">
              <button
              class="quickFilter-btn btn1"
              id="addLadderStage"
              >
              <img src="./images/Add.svg" alt="filter" />
              </button>
            </div>
            <div style="height: 38px">
            </div>
            <div style="height: 38px">
            </div>
            </div>
          </div>

          <div class="details-item">
            <div style="height: 48px; width: 123px;">
              <span class="float-span">Creative</span>
              <input
                placeholder="Upload creative"
                id="ladderCreative"
                type="file"
                data-att="input"
                data-value="name"
               / style="width: 240px;">
            </div>
          </div>

        </div>

  
        <div style="display: flex;text-align: center;width: 100%;margin: auto;justify-content: center;">
          <button class="dialog-btn" onclick="addLadderFunction()">
            Submit
          </button>
        </div>
      </div>
    </dialog>

    <!-- ---------------------- UPDATE CLIENT INFORMATION END ----------------------- -->

<!-- ------------------------ UPDATE REMARK END ------------------------- -->
<dialog id="remarks-dialog" style="display: none; height: 70%; overflow-x: hidden;">
  <div class="add-nlead-modal" style="height: 100%;">
    <!-- Heading  -->
    <div class="heading">
      <span>Update Remark</span>
      <img
        class="close-btn"
        style="cursor: pointer"
        src="./images/Close.svg"
        alt="close"
        onclick="closeDialog('remarks-dialog')"
      />
    </div>

    <!-- Details Accordion -->
    
    <!-- Details Items Container -->
    <div class="details-container" style="display: block">
      <!-- Details Items  -->
      <div class="details-item">
        <div>
          <span class="float-span">Enter Remark</span>
          <textarea
            id="remark"
          style="width: 100%; padding-left: 8px; padding-top: 5px;"></textarea>
        </div>
      </div>

      <div class="details-item">
        <div style="height: 38px">
          <span class="float-span" style="left: 1px;">Select Follow Up Type</span>
          <select
            class="search_source selectpicker"
            name="follow_up_type"
            id="follow_up_type"
            type="date"
            data-att="input"
            data-value="name"
          />
          <option value="client">Client Follow Up</option>
          <option value="developer">Developer Follow Up</option>
        </select>
        </div>
        <div style="height: 38px">
          <span class="float-span">FollowUp Date</span>
          <input
            placeholder="Enter Here"
            name="follow_up_date"
            id="follow_up_date"
            type="date"
            data-att="input"
            data-value="name"
           />
        </div>
        <div style="height: 38px">
          <button class="dialog-btn" onclick="updateUserRemark()" id="add_followup">
            ADD
          </button>
        </div>
      </div>
      <div  id="remarkrowsappend">
                
      </div>
      </div>

    </div>


  
  </div>
</dialog>

<!-- ---------------------- UPDATE REMARK END----------------------- -->



<!-- ------------------------  REMARK HISTORY END ------------------------- -->
<dialog id="remarks-history-dialog" style="display: none; height: 70%; overflow-x: hidden;">
  <div class="add-nlead-modal" >
    <!-- Heading  -->
    <div class="heading">
      <span>Remark History</span>
      <img
        class="close-btn"
        style="cursor: pointer"
        src="./images/Close.svg"
        alt="close"
        onclick="closeDialog('remarks-history-dialog')"
      />
    </div>

    <!-- Details Accordion -->
      
         <div class="remarksDiv" id="remarksDiv">
          
          
        </div>
  </div>
</dialog>

<!-- ----------------------  REMARK HISTORY END----------------------- -->






 
    <script src="./js/script.js"></script>
    <script src="./js/filter.js"></script>
    <script src="./js/openRemark.js"></script>


    <!-- Daterange Script -->
    <script type="text/javascript">
      $(function () {
        $('input[name="closureDate"]').daterangepicker({
          autoUpdateInput: false,
          locale: {
            cancelLabel: "Clear",
          },
          autoApply: true,
          ranges: {
            Today: [moment(), moment()],
            Yesterday: [
              moment().subtract(1, "days"),
              moment().subtract(1, "days"),
            ],
            "Last 7 Days": [moment().subtract(6, "days"), moment()],
            "Last 30 Days": [moment().subtract(29, "days"), moment()],
            "This Month": [moment().startOf("month"), moment().endOf("month")],
            "Last Month": [
              moment().subtract(1, "month").startOf("month"),
              moment().subtract(1, "month").endOf("month"),
            ],
          },
        });

        $('input[name="closureDate"]').on(
          "apply.daterangepicker",
          function (ev, picker) {
            $(this).val(
              picker.startDate.format("MM/DD/YYYY") +
                " - " +
                picker.endDate.format("MM/DD/YYYY")
            );
          }
        );

        $('input[name="closureDate"]').on(
          "cancel.daterangepicker",
          function (ev, picker) {
            $(this).val("");
          }
        );
      });


    </script>
    <!-- Bootsthap Select Script -->
    <script>
      $(document).ready(function () {
        $(".selectpicker").selectpicker();
      });
    </script>

    <!-- Script to close the table see more  -->
    <script>
      $(document).ready(function () {
          function closeOtherDivs(target) {
              $(".see-more").not(target).slideUp();
              $(".active-see-more").removeClass("active-see-more"); // Remove active class
              $(".nested-see-more").hide(); // Hide nested-see-more
          }
  
          function hideAllDivs() {
              $(".see-more").slideUp();
          }
  
          // Use event delegation to handle clicks on td[data-label='see-more']
          $(document).on("click", "td[data-label='see-more']", function (event) {
              event.stopPropagation(); // Prevent click from propagating to document
              var target = $(this).find(".see-more");
              target.slideToggle();
              closeOtherDivs(target);
          });
  
          // Prevent .see-more click from closing itself
          $(".see-more").click(function (event) {
              event.stopPropagation();
          });
  
          // Close .see-more when clicking outside of it
          $(document).click(function () {
              hideAllDivs();
          });
      });
  </script>
   
  </body>
</html>
